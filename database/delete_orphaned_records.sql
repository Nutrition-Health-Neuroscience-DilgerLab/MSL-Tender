-- Delete orphaned database records that have no corresponding images in R2
-- This removes the 194 records (excluding header) from db_records_without_images.csv
-- to ensure perfect 1:1 match between database records and available images

-- Based on validation from November 30, 2025
-- Total records before deletion: 1,751
-- Expected records after deletion: ~1,557 (1,751 - 194)
-- Expected matched records: 1,490 (images uploaded to R2)

-- Delete records by matching the chop ID in the image_url filename
DELETE FROM sample_images 
WHERE image_url LIKE '%/2004B00C0428D00.JPG'
   OR image_url LIKE '%/2004B00C0429D00.JPG'
   -- Study 2205 (83 records) - majority of missing images
   OR image_url LIKE '%/2205B02C2211D01.JPG'
   OR image_url LIKE '%/2205B01C8128D01.JPG'
   OR image_url LIKE '%/2205B01C2030D01.JPG'
   OR image_url LIKE '%/2205B02C8152D01.JPG'
   OR image_url LIKE '%/2205B02C2204D01.JPG'
   OR image_url LIKE '%/2205B02C2174D01.JPG'
   OR image_url LIKE '%/2205B02C2124D01.JPG'
   OR image_url LIKE '%/2205B02C2176D01.JPG'
   OR image_url LIKE '%/2205B02C8187D01.JPG'
   OR image_url LIKE '%/2205B02C8227D01.JPG'
   OR image_url LIKE '%/2205B02C2165D01.JPG'
   OR image_url LIKE '%/2205B02C2168D01.JPG'
   OR image_url LIKE '%/2205B02C8175D01.JPG'
   OR image_url LIKE '%/2205B01C2019D01.JPG'
   OR image_url LIKE '%/2205B01C2042D01.JPG'
   OR image_url LIKE '%/2205B01C2102D01.JPG'
   OR image_url LIKE '%/2205B01C2103D01.JPG'
   OR image_url LIKE '%/2205B01C8048D01.JPG'
   OR image_url LIKE '%/2205B02C8159D01.JPG'
   OR image_url LIKE '%/2205B01C2079D01.JPG'
   OR image_url LIKE '%/2205B01C8026D01.JPG'
   OR image_url LIKE '%/2205B01C8027D01.JPG'
   OR image_url LIKE '%/2205B01C8100D01.JPG'
   OR image_url LIKE '%/2205B02C2213D01.JPG'
   OR image_url LIKE '%/2205B02C8191D01.JPG'
   OR image_url LIKE '%/2205B01C8043D01.JPG'
   OR image_url LIKE '%/2205B01C8067D01.JPG'
   OR image_url LIKE '%/2205B02C2128D01.JPG'
   OR image_url LIKE '%/2205B01C8091D01.JPG'
   OR image_url LIKE '%/2205B01C8113D01.JPG'
   OR image_url LIKE '%/2205B02C8146D01.JPG'
   OR image_url LIKE '%/2205B01C2086D01.JPG'
   OR image_url LIKE '%/2205B01C2036D01.JPG'
   OR image_url LIKE '%/2205B02C8139D01.JPG'
   OR image_url LIKE '%/2205B02C8143D01.JPG'
   OR image_url LIKE '%/2205B02C2196D01.JPG'
   OR image_url LIKE '%/2205B02C8155D01.JPG'
   OR image_url LIKE '%/2205B01C2026D01.JPG'
   OR image_url LIKE '%/2205B01C2049D01.JPG'
   OR image_url LIKE '%/2205B01C2054D01.JPG'
   OR image_url LIKE '%/2205B01C2085D01.JPG'
   OR image_url LIKE '%/2205B02C2134D01.JPG'
   OR image_url LIKE '%/2205B02C2154D01.JPG'
   OR image_url LIKE '%/2205B02C2169D01.JPG'
   OR image_url LIKE '%/2205B02C8158D01.JPG'
   OR image_url LIKE '%/2205B01C2089D01.JPG'
   OR image_url LIKE '%/2205B01C2094D01.JPG'
   OR image_url LIKE '%/2205B01C8014D01.JPG'
   OR image_url LIKE '%/2205B02C2216D01.JPG'
   OR image_url LIKE '%/2205B02C8196D01.JPG'
   OR image_url LIKE '%/2205B02C8218D01.JPG'
   OR image_url LIKE '%/2205B01C2038D01.JPG'
   OR image_url LIKE '%/2205B01C8012D01.JPG'
   OR image_url LIKE '%/2205B01C8034D01.JPG'
   OR image_url LIKE '%/2205B01C8062D01.JPG'
   OR image_url LIKE '%/2205B01C8085D01.JPG'
   OR image_url LIKE '%/2205B02C2226/2139D01.JPG'
   OR image_url LIKE '%/2205B02C2119D01.JPG'
   OR image_url LIKE '%/2205B02C8186D01.JPG'
   OR image_url LIKE '%/2205B02C8220D01.JPG'
   OR image_url LIKE '%/2205B01C2080D01.JPG'
   OR image_url LIKE '%/2205B01C2008D01.JPG'
   OR image_url LIKE '%/2205B01C8081D01.JPG'
   OR image_url LIKE '%/2205B01C2020D01.JPG'
   OR image_url LIKE '%/2205B01C2027D01.JPG'
   OR image_url LIKE '%/2205B01C2035D01.JPG'
   OR image_url LIKE '%/2205B01C8003D01.JPG'
   OR image_url LIKE '%/2205B01C8070D01.JPG'
   OR image_url LIKE '%/2205B02C8140D01.JPG'
   OR image_url LIKE '%/2205B02C8211D01.JPG'
   OR image_url LIKE '%/2205B01C8054D01.JPG'
   OR image_url LIKE '%/2205B01C8103D01.JPG'
   OR image_url LIKE '%/2205B02C8132D01.JPG'
   OR image_url LIKE '%/2205B01C2225D01.JPG'
   OR image_url LIKE '%/2205B02C8255D01.JPG'
   OR image_url LIKE '%/2205B01C2075D01.JPG'
   OR image_url LIKE '%/2205B01C8092D01.JPG'
   OR image_url LIKE '%/2205B02C2130D01.JPG'
   OR image_url LIKE '%/2205B02C2159D01.JPG'
   OR image_url LIKE '%/2205B02C2143D01.JPG'
   OR image_url LIKE '%/2205B02C2129D01.JPG'
   OR image_url LIKE '%/2205B02C8210D01.JPG'
   -- Study 2010 (61 records)
   OR image_url LIKE '%/2010B01C0102D00.JPG'
   OR image_url LIKE '%/2010B03C0265D00.JPG'
   OR image_url LIKE '%/2010B02C0197D00.JPG'
   OR image_url LIKE '%/2010B03C0264D00.JPG'
   OR image_url LIKE '%/2010B02C0199D00.JPG'
   OR image_url LIKE '%/2010B03C0261D00.JPG'
   OR image_url LIKE '%/2010B03C0271D00.JPG'
   OR image_url LIKE '%/2010B03C0284D00.JPG'
   OR image_url LIKE '%/2010B02C0190D00.JPG'
   OR image_url LIKE '%/2010B03C0270D00.JPG'
   OR image_url LIKE '%/2010B03C0273D00.JPG'
   OR image_url LIKE '%/2010B03C0281D00.JPG'
   OR image_url LIKE '%/2010B03C0288D00.JPG'
   OR image_url LIKE '%/2010B03C0299D00.JPG'
   OR image_url LIKE '%/2010B02C0183D00.JPG'
   OR image_url LIKE '%/2010B02C0187D00.JPG'
   OR image_url LIKE '%/2010B03C0263D00.JPG'
   OR image_url LIKE '%/2010B03C0287D00.JPG'
   OR image_url LIKE '%/2010B02C0181D00.JPG'
   OR image_url LIKE '%/2010B02C0198D00.JPG'
   OR image_url LIKE '%/2010B03C0291D00.JPG'
   OR image_url LIKE '%/2010B02C0184D00.JPG'
   OR image_url LIKE '%/2010B02C0186D00.JPG'
   OR image_url LIKE '%/2010B02C0195D00.JPG'
   OR image_url LIKE '%/2010B02C0200D00.JPG'
   OR image_url LIKE '%/2010B03C0279D00.JPG'
   OR image_url LIKE '%/2010B03C0282D00.JPG'
   OR image_url LIKE '%/2010B03C0269D00.JPG'
   OR image_url LIKE '%/2010B03C0283D00.JPG'
   OR image_url LIKE '%/2010B03C0298D00.JPG'
   OR image_url LIKE '%/2010B02C0192D00.JPG'
   OR image_url LIKE '%/2010B02C0196D00.JPG'
   OR image_url LIKE '%/2010B03C0268D00.JPG'
   OR image_url LIKE '%/2010B03C0272D00.JPG'
   OR image_url LIKE '%/2010B03C0275D00.JPG'
   OR image_url LIKE '%/2010B03C0277D00.JPG'
   OR image_url LIKE '%/2010B03C0278D00.JPG'
   OR image_url LIKE '%/2010B03C0289D00.JPG'
   OR image_url LIKE '%/2010B03C0300D00.JPG'
   OR image_url LIKE '%/2010B02C0188D00.JPG'
   OR image_url LIKE '%/2010B03C0267D00.JPG'
   OR image_url LIKE '%/2010B03C0274D00.JPG'
   OR image_url LIKE '%/2010B03C0276D00.JPG'
   OR image_url LIKE '%/2010B03C0290D00.JPG'
   OR image_url LIKE '%/2010B03C0292D00.JPG'
   OR image_url LIKE '%/2010B03C0295D00.JPG'
   OR image_url LIKE '%/2010B03C0296D00.JPG'
   OR image_url LIKE '%/2010B03C0297D00.JPG'
   OR image_url LIKE '%/2010B02C0185D00.JPG'
   OR image_url LIKE '%/2010B02C0191D00.JPG'
   OR image_url LIKE '%/2010B02C0193D00.JPG'
   OR image_url LIKE '%/2010B03C0262D00.JPG'
   OR image_url LIKE '%/2010B03C0266D00.JPG'
   OR image_url LIKE '%/2010B03C0294D00.JPG'
   OR image_url LIKE '%/2010B02C0182D00.JPG'
   OR image_url LIKE '%/2010B02C0189D00.JPG'
   OR image_url LIKE '%/2010B03C0293D00.JPG'
   OR image_url LIKE '%/2010B02C0194D00.JPG'
   OR image_url LIKE '%/2010B03C0285D00.JPG'
   OR image_url LIKE '%/2010B03C0280D00.JPG'
   OR image_url LIKE '%/2010B03C0286D00.JPG'
   -- Study 2014 (3 records)
   OR image_url LIKE '%/2014B00C0025D00.JPG'
   OR image_url LIKE '%/2014B00C0027D00.JPG'
   OR image_url LIKE '%/2014B00C0004D00.JPG'
   -- Study 2104 (10 records)
   OR image_url LIKE '%/2104B01C0030D00.JPG'
   OR image_url LIKE '%/2104B01C0121D00.JPG'
   OR image_url LIKE '%/2104B01C0570D00.JPG'
   OR image_url LIKE '%/2104B01C0098D00.JPG'
   OR image_url LIKE '%/2104B01C0074D00.JPG'
   OR image_url LIKE '%/2104B01C0596D00.JPG'
   OR image_url LIKE '%/2104B01C0019D00.JPG'
   OR image_url LIKE '%/2104B01C0097D00.JPG'
   OR image_url LIKE '%/2104B02C0139D00.JPG'
   OR image_url LIKE '%/2104B01C0077D00.JPG'
   -- Study 2108 (13 records)
   OR image_url LIKE '%/2108B00C0009D00.JPG'
   OR image_url LIKE '%/2108B00C0199D00.JPG'
   OR image_url LIKE '%/2108B00C0040D00.JPG'
   OR image_url LIKE '%/2108B00C0084D00.JPG'
   OR image_url LIKE '%/2108B00C306xD00.JPG'
   OR image_url LIKE '%/2108B00C124xD00.JPG'
   OR image_url LIKE '%/2108B00C0046D00.JPG'
   OR image_url LIKE '%/2108B00C140xD00.JPG'
   OR image_url LIKE '%/2108B00C169xD00.JPG'
   OR image_url LIKE '%/2108B00C177xD00.JPG'
   OR image_url LIKE '%/2108B00C100xD00.JPG'
   OR image_url LIKE '%/2108B00C169xyD00.JPG'
   OR image_url LIKE '%/2108B00C0108D00.JPG'
   -- Study 2110 (2 records)
   OR image_url LIKE '%/2110B00C0084D00.JPG'
   OR image_url LIKE '%/2110B00C0097D00.JPG'
   -- Study 2116 (6 records)
   OR image_url LIKE '%/2116B01C0110D00.JPG'
   OR image_url LIKE '%/2116B01C0127D00.JPG'
   OR image_url LIKE '%/2116D04C4128D00.JPG'
   OR image_url LIKE '%/2116B01C0133D00.JPG'
   OR image_url LIKE '%/2116D04C4127D00.JPG'
   OR image_url LIKE '%/2116D04C4126D00.JPG'
   -- Study 2217 (1 record)
   OR image_url LIKE '%/2217B00C0004D02.JPG'
   -- Study 2304 (4 records)
   OR image_url LIKE '%/2304B00C0034D00.JPG'
   OR image_url LIKE '%/2304B00C0037D00.JPG'
   OR image_url LIKE '%/2304B00C0138D00.JPG'
   OR image_url LIKE '%/2304B00C0016D00.JPG'
   -- Study 2307 (7 records)
   OR image_url LIKE '%/2307B01C1109D01.JPG'
   OR image_url LIKE '%/2307B02C0267D01.JPG'
   OR image_url LIKE '%/2307B02C0266D01.JPG'
   OR image_url LIKE '%/2307B03C0374D01.JPG'
   OR image_url LIKE '%/2307B03C3118D01.JPG'
   OR image_url LIKE '%/2307B02C2146D01.JPG'
   OR image_url LIKE '%/2307B01C1158D01.JPG'
   -- Study 2003 (3 records)
   OR image_url LIKE '%/2003B00C9307D00.JPG'
   OR image_url LIKE '%/2003B00C9319D00.JPG'
   OR image_url LIKE '%/2003B00C9306D00.JPG';

-- Note: Converted from IN clause to LIKE patterns because sample_images table
-- doesn't have standardized_chop_id column - IDs are embedded in image_url filenames

-- Verify deletion count
-- Expected: Up to 194 rows deleted (only those that exist in database)
-- This should match records from db_records_without_images.csv that have 404 errors
